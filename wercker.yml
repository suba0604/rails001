# https://registry.hub.docker.com/_/ruby/
box: ruby:2.3
# You can also use services such as databases. Read more on our dev center:
# http://devcenter.wercker.com/docs/services/index.html
services:
     - postgres
    # http://devcenter.wercker.com/docs/services/postgresql.html
#services:
#     - mysql
#      env:
#        MYSQL_ROOT_PASSWORD: root_password
#        MYSQL_USER: testuser
#        MYSQL_PASSWORD: testuser
#        MYSQL_DATABASE: testdb
    # - mongo
    # http://devcenter.wercker.com/docs/services/mongodb.html

# This is the build pipeline. Pipelines are the core of wercker
# Read more about pipelines on our dev center
# http://devcenter.wercker.com/docs/pipelines/index.html
build:
    # Steps make up the actions in your pipeline
    # Read more about steps on our dev center:
    # http://devcenter.wercker.com/docs/steps/index.html
    steps:
        - bundle-install
        - rails-database-yml:
#            service: mysql
            service: postgresql
        - script:
           name: echo ruby information
           code: |
               echo “ruby version $(ruby –version) running!”
               echo “from location $(which ruby)”
               echo -p “gem list: $(gem list)”
#        - script:
#            name: Set up db
#            code: RAILS_ENV=test bundle exec rake db:schema:load
        - script:
            name: rspec
            code: bundle exec rspec